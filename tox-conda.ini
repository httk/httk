#
#    The high-throughput toolkit (httk)
#    Copyright (C) 2012-2025 The httk authors
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
# Run tests using:
#
#   HTTK_TEST_TYPE=<test type> tox -c tox-conda.ini
#
# Possible options for HTTK_TEST_TYPE are:
#
#   * all (default): the full test suite
#   * ci: a light set of tests suitable to run in CI
#   * pyver: just test that the tox and environment setup works
#          to test things with the intended python versions.
#          also: use this to refresh the Python environments in
#          .venv to match the spec in requirements.txt
#          (which then can be activated, e.g., as
#          source .venv/py39/bin/activate to use them for development)
#

[tox]
envlist = py27
skipsdist = true 

[testenv:py27]
external = true
skip_install = true
env_dir = {toxinidir}/.venvs/conda/venvs/py27
usedevelop = false
base_python = {envdir}/bin/python2
deps =
commands =
    {envdir}/bin/python Tests/{env:HTTK_TEST_TYPE:all}.py
setenv =
    PYTHONUNBUFFERED = yes
    PYTHONPATH = {toxinidir}/src
    HTTK_TEST_EXPECT_PYVER = {envname}
    HTTK_SUPRESS_EXIT_MSG = 1
