<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>httk Users’ Guide &mdash; httk 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="httk 1.0.1 documentation" href="index.html" />
    <link rel="next" title="httk Contributors" href="contributors.html" />
    <link rel="prev" title="httk Runmanager Details" href="runmanager_details.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="contributors.html" title="httk Contributors"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="runmanager_details.html" title="httk Runmanager Details"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">httk 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="httk-users-guide">
<h1><em>httk</em> Users&#8217; Guide<a class="headerlink" href="#httk-users-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The High-Throughput Toolkit (httk) is a toolkit for preparing and
running calculations, analyzing the results, and store them in a
global and/or in a personalized database. The word &#8216;high-throughput&#8217;
refers to the practice of executing a vast number of computational
tasks on a supercomputer cluster, in which case proper automatization
of all steps is critically important. Httk is presently targeted at atomistic calculations in materials science and electronic structure, but aims to be extended into a library useful also outside those areas.</p>
<p>This file is the users' guide. It covers different aspects of the
functionality provided by httk. For help on other topics, see
the <a class="reference internal" href="index.html"><em>front page</em></a>.
</p><p>
For an even quicker introduction, look through the overview presentation
on that page.
</p></div>
<div class="section" id="importing-the-httk-python-library-into-your-program">
<h2>Importing the httk python library into your program<a class="headerlink" href="#importing-the-httk-python-library-into-your-program" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to import the python library if you do atomistic
calculations is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">httk</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">httk.atomistic</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>This imports some very often used identifiers into the namespace of
your program, e.g., Structure for atomic structures. If you want to
avoid wild imports (<cite>from X import *</cite>) you can of course instead do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">httk</span>
<span class="kn">import</span> <span class="nn">httk.atomistic</span>
</pre></div>
</div>
<p>(Note the need to separately import the atomistic sub-library; it is
not imported automatically by import.httk)</p>
<p>To avoid dependences on libraries that you may not have installed,
httk implements somewhat unusual &#8216;plugin&#8217;-type extensions to its core
classes. For example, you can enable visualization of atomic
structures, which requires jmol to be installed, by the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">httk</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">httk.atomistic</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">httk.atomistic.vis</span>
</pre></div>
</div>
<p>This adds new visualization calls to the Structure class which can be
called, e.g., as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mystructure</span><span class="o">.</span><span class="n">vis</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(Note: if you forget to do &#8216;import httk.atomistic.vis&#8217;, httk informs
you about the need to add this import.)</p>
</div>
<div class="section" id="example-programs">
<h2>Example programs<a class="headerlink" href="#example-programs" title="Permalink to this headline">¶</a></h2>
<p>It may be easiest to learn the use of httk by example. There are three
such resources available. The presentation httk_overview.pdf shows
working code snippets that can be copy+pasted. There are short
examples under Examples. Then there is a step-by-step tutorial under
Tutorial/ that is intended to showcase the httk features in a natural
progressing order.</p>
</div>
<div class="section" id="interfacing-with-other-software">
<h2>Interfacing with other software<a class="headerlink" href="#interfacing-with-other-software" title="Permalink to this headline">¶</a></h2>
<div class="section" id="interfacing-with-python-libraries">
<h3>Interfacing with python libraries<a class="headerlink" href="#interfacing-with-python-libraries" title="Permalink to this headline">¶</a></h3>
<p>A common need is to use functionality provided by other python
libraries outside the standard libraries.  Httk tries to help with
this. It provides &#8216;glue&#8217; modules that lets you import exactly the
version you want.</p>
<p>To use the ase python library (Atomic Simulation Environment)
together with httk, you typically want to do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">httk.external.ase_glue</span>
<span class="kn">import</span> <span class="nn">ase</span>
</pre></div>
</div>
<p>The first line imports the httk &#8216;glue&#8217; module. It includes helper
functionality that makes httk and ase work together.  But, it also
sets up your python environment so that at the next line &#8216;import ase&#8217;
actually imports the version of ase that you have configured httk to
use. This can, for example, be a specific version in your home
directory (which can help avoid an older version provided system-wide
on the computational cluster you are using). All you need to do is
edit httk.cfg in the main httk directory and set the path to where you
have placed the ase library (e.g., in your home directory).</p>
</div>
<div class="section" id="interact-with-other-programs">
<h3>Interact with other programs<a class="headerlink" href="#interact-with-other-programs" title="Permalink to this headline">¶</a></h3>
<p>Similar to the interface to other python libraries, httk helps you
call other (non-python) software packages.</p>
<p>For example, the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">httk.external.jmol</span>
</pre></div>
</div>
<p>gives you access to routines for running and interacting with jmol.</p>
<p>Note that subpackages of httk.external raise an exception if you try
to import them and the relevant software is missing.</p>
</div>
<div class="section" id="interface-packages">
<h3>Interface packages<a class="headerlink" href="#interface-packages" title="Permalink to this headline">¶</a></h3>
<p>httk also provides &#8216;light&#8217; versions of its interface to other software
under httk.iface.*. These packages DO NOT require the corresponding
software to be installed. This usually includes things such as writing
correctly formatted files, etc.</p>
</div>
</div>
<div class="section" id="more-details-on-the-httk-python-library">
<h2>More details on the httk python library<a class="headerlink" href="#more-details-on-the-httk-python-library" title="Permalink to this headline">¶</a></h2>
<p>This section covers some design decisions of httk that it may be
useful to take note of.</p>
<div class="section" id="creating-new-httk-objects">
<h3>Creating new httk objects<a class="headerlink" href="#creating-new-httk-objects" title="Permalink to this headline">¶</a></h3>
<p>The python default constructor (the &#8216;__init__&#8217; constructor) that is
called when simply doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>should almost <em>never</em> be used with httk objects, for several
reasons. Perhaps the most important is that it is going to change
between version of httk (for more explanation, see the developers&#8217;
guide).</p>
<p>Instead, almost all httk objects provide a classmethod named
<cite>*.create</cite> for this purpose instead. I.e.,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">struct</span> <span class="o">=</span> <span class="n">Structure</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="a-note-about-object-mutation">
<h3>A note about object mutation<a class="headerlink" href="#a-note-about-object-mutation" title="Permalink to this headline">¶</a></h3>
<p>Most httk objects assume they stay unaltered after creation (unless
clearly spelled out, e.g., &#8216;MutableFracVector&#8217;). Hence, methods
&#8216;altering&#8217; an object normally return a <em>new copy</em> of the object with
the alterations made. This comes with a number of benefits:</p>
<blockquote>
<div><ul class="simple">
<li>They can be used as keys in dictionaries</li>
<li>Less risk for bugs as one part of code alters an object that
happens to also be stored and used somewhere else.</li>
<li>The API becomes more clear, you do not have to wonder if the object
itself may be altered by calling a method (it never is.)</li>
</ul>
</div></blockquote>
<p>It also comes with a drawback</p>
<blockquote>
<div><ul class="simple">
<li>Code making, say, a series of alterations of an object may becomes more bulky to write.</li>
</ul>
</div></blockquote>
<p>It is the intention to provide mutable versions where this drawback is
of significance. Right now, this more or less only applies to the
existence of a MutableFracVector vs the regular FracVector.</p>
</div>
<div class="section" id="object-conversion-with-the-use-method">
<h3>Object conversion with the &#8216;use&#8217; method<a class="headerlink" href="#object-conversion-with-the-use-method" title="Permalink to this headline">¶</a></h3>
<p>Almost all httk classes contains a <cite>*.use()</cite> method for helping with
object type conversion. Lets say that you get a Structure object
&#8216;structure&#8217; which represents structure data fetched out of the
database, but you want to have a UnitcellStructure instead, simply do
this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">unitcellstruct</span> <span class="o">=</span> <span class="n">UnitcellStructure</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="i-o-in-httk">
<h3>I/O in httk<a class="headerlink" href="#i-o-in-httk" title="Permalink to this headline">¶</a></h3>
<p>All I/O in the httk library uses our own framework of IOAdapters
classes. This is usually not something you need to worry about; any
routine that takes as a parameter an &#8220;IOAdapter&#8221; &#8216;ioa&#8217; will accept a
filename or any form of python streaming object in its place.  (You
may want to check the IOAdapter chapter of the developers&#8217; guide to
see how this is done in practice, as the IOAdapters may be helpful
also in your own routines.)</p>
</div>
</div>
<div class="section" id="the-httk-taskmanager-toolset">
<h2>The httk taskmanager toolset<a class="headerlink" href="#the-httk-taskmanager-toolset" title="Permalink to this headline">¶</a></h2>
<p>Apart from the python library, httk also comprises a toolset for
executing computational tasks on computer clusters.  To avoid issues
with incompatible version, this part of httk is mostly written in bash
rather than python.  If things are working as they should, this is not
something you should need to worry about, you can still script your
runs in python, or any other language you prefer.</p>
<div class="section" id="setting-up-a-computational-project">
<h3>Setting up a computational &#8216;project&#8217;<a class="headerlink" href="#setting-up-a-computational-project" title="Permalink to this headline">¶</a></h3>
<p>You should first setup a &#8216;top&#8217; working directory for your project. Use
&#8216;cd&#8217; to go to this directory and then run:</p>
<div class="highlight-python"><div class="highlight"><pre>httk-project-setup project_name
</pre></div>
</div>
</div>
<div class="section" id="configuring-computers">
<h3>Configuring &#8216;computers&#8217;<a class="headerlink" href="#configuring-computers" title="Permalink to this headline">¶</a></h3>
<p>Supercomputer clusters, as well as other computers that you are going
to execute runs on can now be setup by the command httk-computer-setup
this allows you to configure settings for how to transport runs to
this computer and run them there.</p>
<p>After you have configured the computer you also need to run:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">httk</span><span class="o">-</span><span class="n">computer</span><span class="o">-</span><span class="n">install</span>
</pre></div>
</div>
<p>to copy necessary httk files to this computer and &#8220;prepare it&#8221; for
executing runs.</p>
</div>
<div class="section" id="sending-tasks-to-a-computer-and-running-them">
<h3>Sending tasks to a computer and running them<a class="headerlink" href="#sending-tasks-to-a-computer-and-running-them" title="Permalink to this headline">¶</a></h3>
<p>For this to work you need to have created batch tasks on the right
format. For this, please consider closely Step6 of the httk tutorial.</p>
<p>Once you have a directory with runs, execute:</p>
<div class="highlight-python"><div class="highlight"><pre>httk-tasks-send-to-computer &lt;computer name&gt;
</pre></div>
</div>
<p>and the runs will be copied over. They will not yet be started.</p>
<p>All execution of tasks is done via the taskmanager.sh process, which
now needs to be started on the computer. Run:</p>
<div class="highlight-python"><div class="highlight"><pre>httk-tasks-start-taskmanager &lt;computer name&gt;
</pre></div>
</div>
<p>and it will start up.</p>
<p>You can monitor the status of your compute runs by:</p>
<div class="highlight-python"><div class="highlight"><pre>httk-tasks-status &lt;computer name&gt;
</pre></div>
</div>
<p>And as soon as one or more of the runs have finished, you can fetch
them back with:</p>
<div class="highlight-python"><div class="highlight"><pre>httk-tasks-receive-from-computer &lt;computer name&gt;
</pre></div>
</div>
<p>This concludes what you need for &#8216;simple&#8217; use of the task
system. However, for advanced use, you will need to better understand
precisely how the taskmanager.sh process operates. This information is
present in a separate text: RUNMANAGER_DETAILS.txt.</p>
</div>
<div class="section" id="if-you-want-how-to-submit-your-results-to-a-public-database">
<h3>If you want; how to submit your results to a public database<a class="headerlink" href="#if-you-want-how-to-submit-your-results-to-a-public-database" title="Permalink to this headline">¶</a></h3>
<p>httk includes tools that, if you want to, makes it easy to submit a
project directory so that your data can be made available and
searchable in a public database. The normal case would be the
Open Materials Database (<a class="reference external" href="http://openmaterialsdb.se">http://openmaterialsdb.se</a>), run by the
same people involved with the httk framework.</p>
<p>First, if you have not yet setup a project directory, do so. I.e.,
collect all the files that you wish to be part of the submission and do:</p>
<div class="highlight-python"><div class="highlight"><pre>httk-project-setup project_name
</pre></div>
</div>
<p>This creates a subdirectory <cite>ht_project</cite> in this directory. You must now use a text editor and edit three files in this directory:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Edit <cite>ht_project/config</cite> and set <cite>description=A good description of your poject</cite>.</li>
<li>Edit <cite>ht_project/license</cite> and write clearly what license you place the data under. For submissions to the Open Materials Database we normally ask for the data to be placed either under a creative commons attribution license, or the public domain. (This can be negotiated, contact the omdb team at contact [at] openmaterialsdb.se.) See <a class="reference external" href="http://openmaterialsdb.se/contributorinfo.html">http://openmaterialsdb.se/contributorinfo.html</a> for the latest info.</li>
<li>Optional: edit <cite>ht_project/references</cite> and insert, one per line, any citations to papers, etc., that you want to associate with this project.</li>
</ol>
</div></blockquote>
<p>Once your project is setup correctly, you simply have to have the project
directory as your current working directory and execute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">httk</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">submit</span>
</pre></div>
</div>
<p>(or httk-project-submit &lt;website&gt; if you want to submit somewhere
else than the <em>Open</em> <em>Materials</em> <em>Database</em>.)</p>
<p>After a series of question and a cryptographic signing of your
project files, your files will be submitted to the database.</p>
<p>Note that submitted results are not directly and automatically
processed. There is a certain level of manual
examination by us to make sure the upload makes sense before we
add it to the database.</p>
<p>Furthermore, you can edit the file ht.project/references to add or remove publications even after your result has been submitted. To re-submit updated references, issue the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">httk</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">submit</span><span class="o">-</span><span class="n">update</span><span class="o">-</span><span class="n">references</span>
</pre></div>
</div>
<p>Finally, should you change your mind about the data being published, you can issue the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">httk</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">submit</span><span class="o">-</span><span class="n">withdraw</span>
</pre></div>
</div>
<p>Which will lead to the result eventually being pulled from our data (however, also here some manual work is involved, so the result will not be intimidate.)</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3><a href="#">Navigation</a></h3>
  <ul>
<li><a class="reference internal" href="/index.html">The High-Throughput Toolkit (httk)</a>
</ul>
<ul>
<li><a class="reference internal" href="/downloads.html">Downloads</a>
<li><a class="reference internal" href="/install.html">Installation</a>
<li><a class="reference internal" href="/users_guide.html">Users' Guide</a>
<li><a class="reference internal" href="/runmanager_details.html">Runmanager Details</a>
<li><a class="reference internal" href="/developers_guide.html">Developers' Guide</a>
<li><a class="reference internal" href="/contributors.html">Contributors</a>
<li><a class="reference internal" href="/erratum.html">Erratum</a>
</ul>
<h3><a href="#">Python API</a></h3>
<ul>
<li><a class="reference internal" href="/mod_httk.html">httk</a>
<li><a class="reference internal" href="/mod_httk_atomistic.html">httk.atomistic</a>
</ul>
<ul>
<li><a class="reference internal" href="/httk_base.html">Full API tree</a>
<li><a class="reference internal" href="/genindex.html">Index</a>
<li><a class="reference internal" href="/py-modindex.html">Module Index</a>
<li><a class="reference internal" href="/search.html">Search Page</a>
</ul>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><em>httk</em> Users&#8217; Guide</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#importing-the-httk-python-library-into-your-program">Importing the httk python library into your program</a></li>
<li><a class="reference internal" href="#example-programs">Example programs</a></li>
<li><a class="reference internal" href="#interfacing-with-other-software">Interfacing with other software</a><ul>
<li><a class="reference internal" href="#interfacing-with-python-libraries">Interfacing with python libraries</a></li>
<li><a class="reference internal" href="#interact-with-other-programs">Interact with other programs</a></li>
<li><a class="reference internal" href="#interface-packages">Interface packages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-details-on-the-httk-python-library">More details on the httk python library</a><ul>
<li><a class="reference internal" href="#creating-new-httk-objects">Creating new httk objects</a></li>
<li><a class="reference internal" href="#a-note-about-object-mutation">A note about object mutation</a></li>
<li><a class="reference internal" href="#object-conversion-with-the-use-method">Object conversion with the &#8216;use&#8217; method</a></li>
<li><a class="reference internal" href="#i-o-in-httk">I/O in httk</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-httk-taskmanager-toolset">The httk taskmanager toolset</a><ul>
<li><a class="reference internal" href="#setting-up-a-computational-project">Setting up a computational &#8216;project&#8217;</a></li>
<li><a class="reference internal" href="#configuring-computers">Configuring &#8216;computers&#8217;</a></li>
<li><a class="reference internal" href="#sending-tasks-to-a-computer-and-running-them">Sending tasks to a computer and running them</a></li>
<li><a class="reference internal" href="#if-you-want-how-to-submit-your-results-to-a-public-database">If you want; how to submit your results to a public database</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="contributors.html" title="httk Contributors"
             >next</a> |</li>
        <li class="right" >
          <a href="runmanager_details.html" title="httk Runmanager Details"
             >previous</a> |</li>
        <li><a href="index.html">httk 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2015, Rickard Armiento et al..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6663881-6', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>