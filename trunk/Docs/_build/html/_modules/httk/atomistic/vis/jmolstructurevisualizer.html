<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>httk.atomistic.vis.jmolstructurevisualizer &mdash; httk 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="httk 1.0.1 documentation" href="../../../../index.html" />
    <link rel="up" title="httk.atomistic" href="../../atomistic.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">httk 1.0.1 documentation</a> &raquo;</li>
          <li><a href="../../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../../httk.html" >httk</a> &raquo;</li>
          <li><a href="../../atomistic.html" accesskey="U">httk.atomistic</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for httk.atomistic.vis.jmolstructurevisualizer</h1><div class="highlight"><pre>
<span class="c"># </span>
<span class="c">#    The high-throughput toolkit (httk)</span>
<span class="c">#    Copyright (C) 2012-2015 Rickard Armiento</span>
<span class="c">#</span>
<span class="c">#    This program is free software: you can redistribute it and/or modify</span>
<span class="c">#    it under the terms of the GNU Affero General Public License as</span>
<span class="c">#    published by the Free Software Foundation, either version 3 of the</span>
<span class="c">#    License, or (at your option) any later version.</span>
<span class="c">#</span>
<span class="c">#    This program is distributed in the hope that it will be useful,</span>
<span class="c">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">#    GNU Affero General Public License for more details.</span>
<span class="c">#</span>
<span class="c">#    You should have received a copy of the GNU Affero General Public License</span>
<span class="c">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">httk.external.jmol</span>
<span class="kn">import</span> <span class="nn">httk.core</span>

<div class="viewcode-block" id="JmolStructureVisualizer"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer">[docs]</a><span class="k">class</span> <span class="nc">JmolStructureVisualizer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">struct</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{}):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">struct</span> <span class="o">=</span> <span class="n">struct</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">=</span><span class="n">params</span>
        <span class="k">if</span> <span class="s">&#39;bonds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;bonds&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">if</span> <span class="s">&#39;extbonds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extbonds&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">if</span> <span class="s">&#39;extmetals&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extmetals&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
            <span class="c"># Set to a tuple, first value = length of metal bonds, second value = cutoff distance to unit cell.</span>
        <span class="k">if</span> <span class="s">&#39;polyhedra&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;polyhedra&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">if</span> <span class="s">&#39;repetitions&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;repetitions&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="s">&#39;defaults&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;defaults&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;defaults&#39;</span>
        <span class="k">if</span> <span class="s">&#39;angle&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;angle&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;{0.5 1 0} 20.0&#39;</span>
        <span class="k">if</span> <span class="s">&#39;bgcolor&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;bgcolor&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;#F5F5F5&#39;</span>
        <span class="k">if</span> <span class="s">&#39;unitcell&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;unitcell&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">None</span>
        <span class="k">if</span> <span class="s">&#39;show_unitcell&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;show_unitcell&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">if</span> <span class="s">&#39;extracell&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extracell&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">None</span>
        <span class="k">if</span> <span class="s">&#39;show_supercell&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;show_supercell&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
        <span class="k">if</span> <span class="s">&#39;perspective&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;perspective&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>

<div class="viewcode-block" id="JmolStructureVisualizer.set_defaults"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.set_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">set_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;&quot;&quot;define ~anions (oxygen or nitrogen or fluorine or sulphur or chlorine or selenium or bromine or tellurium or iodine);</span>
<span class="s">        color (boron) lime;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;perspective&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;&quot;&quot;set perspectivedepth on;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;&quot;&quot;set perspectivedepth off;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c">#     def defaults_old(self, extbonds=True, bonds=True, polyhedra=True):</span>
<span class="c">#         self.jmol.send(&quot;&quot;&quot;unitcell {1/1 1/1 1/1};</span>
<span class="c">#         spacefill 25%;</span>
<span class="c">#         define ~cations (lithium or beryllium or boron or carbon or nitrogen or sodium or magnesium or aluminium or silicon or phosphorus or potassium or calcium or scandium or titanium or vanadium or chromium or manganese or iron or cobalt or nickel or copper or zinc or gallium or germanium or arsenic or rubidium or strontium or yttrium or zirconium or niobium or molybdenum or technetium or ruthenium or rhodium or palladium or silver or cadmium or indium or tin or antimony or cesium or barium or hafnium or tantalum or tungsten or rhenium or osmium or iridium or platinum or gold or mercury or thallium or lead or bismuth or polonium or francium or radium or lawrencium or rutherfordium or dubnium or seaborgium or lanthanum or cerium or praseodymium or neodymium or promethium or samarium or europium or gadolinium or terbium or dysprosium or holmium or erbium or thulium or ytterbium or lutetium or actinium or thorium or protactinium or uranium or neptunium or plutonium or americium or curium or berkelium or californium or einsteinium or fermium or mendelevium or nobelium);</span>
<span class="c">#         define ~anions (oxygen or nitrogen or fluorine or sulphur or chlorine or selenium or bromine or tellurium or iodine);</span>
<span class="c">#         connect delete;</span>
<span class="c">#         connect 0.75 2.6;</span>
<span class="c">#         connect (~anions) (~anions) delete;</span>
<span class="c">#         connect (~cations) (~cations) delete;</span>
<span class="c">#         connect (~nobonds) (*) delete;</span>
<span class="c">#         connect 0.75 2.6 (~anions) (~cations) and visible;</span>
<span class="c">#         connect 1.8 (phosphorus) (oxygen or nitrogen) and visible;</span>
<span class="c">#         connect 1.8 (sulphur) (oxygen or nitrogen) and visible;</span>
<span class="c">#         connect 1.8 (selenium) (oxygen) and visible;</span>
<span class="c">#         connect 2.2 (nitrogen) (carbon) and visible;</span>
<span class="c">#         connect 2.0 (silicon) (carbon) and visible;</span>
<span class="c">#         connect 2.0 (selenium) (carbon) and visible;</span>
<span class="c">#         connect 1.45 (hydrogen) (carbon) and visible;</span>
<span class="c">#         connect 1.45 (hydrogen) (nitrogen) and visible;</span>
<span class="c">#         connect 1.45 (hydrogen) (phosphorus) and visible;</span>
<span class="c">#         connect 1.80 (carbon) (carbon) and visible;</span>
<span class="c">#         connect 1.45 (carbon) (hydrogen) and visible;</span>
<span class="c">#         connect 1.50 (nitrogen) (nitrogen) and visible;</span>
<span class="c">#         connect 0.5 1.44 (oxygen) (hydrogen) and visible;</span>
<span class="c">#         connect 1.45 2.40 (oxygen) (hydrogen) and visible HBOND;</span>
<span class="c">#         delete (NOT (unitcell OR connected(unitcell)));</span>
<span class="c">#         polyhedra delete;</span>
<span class="c">#         polyhedra ON;</span>
<span class="c">#         polyhedra bonds (~cations and (connected(3) or connected(4) or connected(5) or connected(6) or connected(7) or connected(8)) and visible) distanceFactor 2.0;</span>
<span class="c">#         polyhedra bonds (~cations and (connected(3) or connected(4) or connected(5) or connected(6) or connected(7) or connected(8)) and visible) distanceFactor 2.0;</span>
<span class="c">#         color polyhedra translucent;</span>
<span class="c">#         &quot;&quot;&quot;)</span>
<span class="c">#         </span>
<span class="c">#         if extbonds == False:</span>
<span class="c">#             self.jmol.send(&quot;restrict cell={2 2 2};\n&quot;)</span>
<span class="c">#         if bonds == False:</span>
<span class="c">#             self.jmol.send(&quot;connect (all) (all) DELETE;\n&quot;)</span>
    
        <span class="c">#self.jmol.send(&quot;center visible;\n&quot;)</span>
        <span class="c">#self.jmol.send(&quot;zoom 0;\n&quot;)</span>

<span class="c">#     def defaults(self):</span>
<span class="c">#         self.jmol.send(&quot;&quot;&quot;unitcell {1/1 1/1 1/1};</span>
<span class="c">#         connect delete;</span>
<span class="c">#         define ~anions (oxygen or nitrogen or fluorine or sulphur or chlorine or selenium or bromine or tellurium or iodine);</span>
<span class="c">#         connect 0.75 2.6 (~anions) (NOT ~anions);</span>
<span class="c">#         connect 1.8 (phosphorus) (oxygen or nitrogen);</span>
<span class="c">#         connect 1.8 (sulphur) (oxygen or nitrogen);</span>
<span class="c">#         connect 1.8 (selenium) (oxygen);</span>
<span class="c">#         connect 2.2 (nitrogen) (carbon);</span>
<span class="c">#         connect 2.0 (silicon) (carbon);</span>
<span class="c">#         connect 2.0 (selenium) (carbon);</span>
<span class="c">#         connect 1.45 (hydrogen) (carbon);</span>
<span class="c">#         connect 1.45 (hydrogen) (nitrogen);</span>
<span class="c">#         connect 1.45 (hydrogen) (phosphorus);</span>
<span class="c">#         connect 1.80 (carbon) (carbon);</span>
<span class="c">#         connect 1.45 (carbon) (hydrogen);</span>
<span class="c">#         connect 1.50 (nitrogen) (nitrogen);</span>
<span class="c">#         connect 2.0 (boron) (boron);</span>
<span class="c">#         connect 0.5 1.44 (oxygen) (hydrogen);</span>
<span class="c">#         connect 1.45 2.40 (oxygen) (hydrogen) HBOND;</span>
<span class="c">#         delete (NOT (unitcell OR connected(unitcell)));</span>
<span class="c">#         polyhedra delete;</span>
<span class="c">#         polyhedra ON;</span>
<span class="c">#         polyhedra BONDS (NOT ~anions); </span>
<span class="c">#         color polyhedra translucent;</span>
<span class="c">#         &quot;&quot;&quot;)</span>
<span class="c"># </span>
<span class="c">#         #polyhedra bonds (NOT ~anions and (connected(3) or connected(4) or connected(5) or connected(6) or connected(7) or connected(8)) and visible) distanceFactor 2.0;</span>
<span class="c">#         if self.params[&#39;polyhedra&#39;] == False:</span>
<span class="c">#             self.jmol.send(&quot;polyhedra OFF;\n&quot;)</span>
<span class="c">#         if self.params[&#39;extbonds&#39;] == False:</span>
<span class="c">#             self.jmol.send(&quot;restrict cell={2 2 2};\n&quot;)</span>
<span class="c">#         if self.params[&#39;bonds&#39;] == False:</span>
<span class="c">#             self.jmol.send(&quot;connect (all) (all) DELETE;\n&quot;)</span>
<span class="c">#     </span>
<span class="c">#         self.jmol.send(&quot;center visible;\n&quot;)</span>
<span class="c">#         #self.jmol.send(&quot;rotate BEST;\n&quot;)</span>
<span class="c">#         self.jmol.send(&quot;rotate AXISANGLE &quot;+ self.params[&#39;angle&#39;]+&quot;;\n&quot;)</span>
<span class="c">#         self.jmol.send(&quot;zoom 0;\n&quot;)</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.connections"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.connections">[docs]</a>    <span class="k">def</span> <span class="nf">connections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;&quot;&quot;connect delete;</span>
<span class="s">        define ~anions (oxygen or nitrogen or fluorine or sulphur or chlorine or selenium or bromine or tellurium or iodine);</span>
<span class="s">        define ~metals (Lithium or Sodium or Potassium or Rubidium or Cesium or Francium or Beryllium or </span>
<span class="s">        Magnesium or Calcium or Strontium or Barium or Radium or Aluminum or Gallium or Indium or Tin or </span>
<span class="s">        Thallium or Lead or Bismuth or Scandium or Titanium or Vanadium or Chromium or Manganese or Iron or </span>
<span class="s">        Cobalt or Nickel or Copper or Zinc or Yttrium or Zirconium or Niobium or Molybdenum or Technetium or </span>
<span class="s">        Ruthenium or Rhodium or Palladium or Silver or Cadmium or Lanthanum or Hafnium or Tantalum or </span>
<span class="s">        Tungsten or Rhenium or Osmium or Iridium or Platinum or Gold or Mercury or Actinium or </span>
<span class="s">        Rutherfordium or Dubnium or Seaborgium or Bohrium or Hassium or Meitnerium or Darmstadtium or </span>
<span class="s">        Roentgenium or Copernicium or Cerium or Praseodymium or Neodymium or Promethium or Samarium or </span>
<span class="s">        Europium or Gadolinium or Terbium or Dysprosium or Holmium or Erbium or Thulium or Ytterbium or </span>
<span class="s">        Lutetium or Thorium or Protactinium or Uranium or Neptunium or Plutonium or Americium or Curium or </span>
<span class="s">        Berkelium or Californium or Einsteinium or Fermium or Mendelevium or Nobelium or Lawrencium);</span>
<span class="s">        connect 0.75 2.6 (~anions) (NOT ~anions);</span>
<span class="s">        connect 1.8 (phosphorus) (oxygen or nitrogen);</span>
<span class="s">        connect 1.8 (sulphur) (oxygen or nitrogen);</span>
<span class="s">        connect 1.8 (selenium) (oxygen);</span>
<span class="s">        connect 2.2 (nitrogen) (carbon);</span>
<span class="s">        connect 2.0 (silicon) (carbon);</span>
<span class="s">        connect 2.0 (selenium) (carbon);</span>
<span class="s">        connect 1.45 (hydrogen) (carbon);</span>
<span class="s">        connect 1.45 (hydrogen) (nitrogen);</span>
<span class="s">        connect 1.45 (hydrogen) (phosphorus);</span>
<span class="s">        connect 1.80 (carbon) (carbon);</span>
<span class="s">        connect 1.45 (carbon) (hydrogen);</span>
<span class="s">        connect 1.50 (nitrogen) (nitrogen);</span>
<span class="s">        connect 2.0 (boron) (boron);</span>
<span class="s">        connect 0.5 1.44 (oxygen) (hydrogen);</span>
<span class="s">        connect 1.45 2.40 (oxygen) (hydrogen) HBOND;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c">#connect 3.1 (~metals) (~metals);</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.preconnect"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.preconnect">[docs]</a>    <span class="k">def</span> <span class="nf">preconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;connect &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extmetals&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&quot; (~metals) (~metals);&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.postconnect"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.postconnect">[docs]</a>    <span class="k">def</span> <span class="nf">postconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.defaults_publish"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.defaults_publish">[docs]</a>    <span class="k">def</span> <span class="nf">defaults_publish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;hide all;</span><span class="se">\n</span><span class="s">unitcell off;</span><span class="se">\n</span><span class="s">set displayCellParameters FALSE;</span><span class="se">\n</span><span class="s">axes off;</span><span class="se">\n</span><span class="s">frank off;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;translate {-1/1 -1/1 -1/1};&quot;</span><span class="p">)</span>
        <span class="c">#self.jmol.send(&quot;unitcell {1/1 1/1 1/1};&quot;)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extmetals&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preconnect</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">postconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        delete (NOT (unitcell OR connected(unitcell)));</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extmetals&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">postconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;delete (NOT (unitcell OR connected(unitcell) OR within(&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extmetals&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&quot;,unitcell)));&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        polyhedra delete;</span>
<span class="s">        polyhedra ON;</span>
<span class="s">        polyhedra BONDS (NOT ~anions); </span>
<span class="s">        color polyhedra translucent;</span>
<span class="s">        unitcell off;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;polyhedra&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;polyhedra OFF;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extbonds&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;restrict cell={1 1 1};</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;bonds&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;connect (all) (all) DELETE;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;show_unitcell&#39;</span><span class="p">]:</span>
    
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;unitcell&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">has_rc_repr</span><span class="p">:</span>
                    <span class="n">basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">rc_basis</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">has_uc_repr</span><span class="p">:</span>
                    <span class="n">basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">uc_basis</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;unitcell&#39;</span><span class="p">]</span>
    
            <span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="o">*</span><span class="p">(</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">newbasis</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">newbasis</span> <span class="o">+=</span> <span class="p">[((</span><span class="n">origin</span> <span class="o">+</span> <span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">.</span><span class="n">to_floats</span><span class="p">()]</span>
            <span class="n">newbasis</span> <span class="o">+=</span> <span class="p">[((</span><span class="n">origin</span> <span class="o">+</span> <span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span><span class="o">.</span><span class="n">to_floats</span><span class="p">()]</span>
            <span class="n">newbasis</span> <span class="o">+=</span> <span class="p">[((</span><span class="n">origin</span> <span class="o">+</span> <span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span><span class="o">.</span><span class="n">to_floats</span><span class="p">()]</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">to_floats</span><span class="p">()</span>
    
            <span class="c">#newbasis = [[1.0,0.0,0.0],[0.0,1.0,0.0],[0.0,0.0,1.0]]</span>
            
            <span class="n">unitcellstr</span> <span class="o">=</span> <span class="s">&quot;unitcell [ &quot;</span>
            <span class="n">unitcellstr</span> <span class="o">+=</span> <span class="s">&quot;{&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">origin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">+</span><span class="s">&quot;} &quot;</span>
            <span class="n">unitcellstrs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">unitcellstrs</span> <span class="o">+=</span> <span class="p">[</span><span class="s">&quot;{&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">newbasis</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">newbasis</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">newbasis</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span><span class="o">+</span><span class="s">&quot;}&quot;</span><span class="p">]</span>
            <span class="n">unitcellstr</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unitcellstrs</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; ];</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">unitcellstr</span> <span class="o">+=</span> <span class="s">&quot;unitcell {1 1 1};</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="n">unitcellstr</span> <span class="o">+=</span> <span class="s">&quot;unitcell on;</span><span class="se">\n</span><span class="s">unitcell 0.025;</span><span class="se">\n</span><span class="s">&quot;</span>
    
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">unitcellstr</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extracell&#39;</span><span class="p">]:</span>
            <span class="n">basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;extracell&#39;</span><span class="p">]</span>                       
            <span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="o">*</span><span class="p">(</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">origin</span><span class="p">,</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>            
            <span class="n">edges</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">edge</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span><span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">to_floats</span><span class="p">())</span> <span class="o">+</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">to_floats</span><span class="p">())</span>                 
                <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;draw line_ec_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; {</span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s">} {</span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s">} DIAMETER 0.06;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">%</span><span class="nb">tuple</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;show_supercell&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">has_rc_repr</span><span class="p">:</span>
                <span class="n">basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">rc_basis</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">has_uc_repr</span><span class="p">:</span>
                <span class="n">basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">uc_basis</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="o">*</span><span class="p">(</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">0</span><span class="o">*</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">origin</span><span class="p">,</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">basis</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>            
            <span class="n">edges</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">edge</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span><span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">to_floats</span><span class="p">())</span> <span class="o">+</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">to_floats</span><span class="p">())</span>                 
                <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;draw line_sc_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; {</span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s">} {</span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s"> </span><span class="si">%f</span><span class="s">} DIAMETER 0.06 COLOR blue;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">%</span><span class="nb">tuple</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                            
        <span class="c">#axis off;</span>

        <span class="c">#polyhedra bonds (NOT ~anions and (connected(3) or connected(4) or connected(5) or connected(6) or connected(7) or connected(8)) and visible) distanceFactor 2.0;</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;rotate BEST;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;display all;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;center visible;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="c">#self.jmol.send(&quot;rotate AXISANGLE {0.5 1 0} 20.0;\n&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;zoom 0;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="JmolStructureVisualizer.extbonds"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.extbonds">[docs]</a>    <span class="k">def</span> <span class="nf">extbonds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extbonds</span> <span class="o">=</span> <span class="n">on</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.polyhedra"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.polyhedra">[docs]</a>    <span class="k">def</span> <span class="nf">polyhedra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polyhedra</span> <span class="o">=</span> <span class="n">on</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.bonds"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.bonds">[docs]</a>    <span class="k">def</span> <span class="nf">bonds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bonds</span> <span class="o">=</span> <span class="n">on</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.repeat"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.repeat">[docs]</a>    <span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">repetitions</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_repetitios</span> <span class="o">=</span> <span class="n">repetitions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.initialize"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.initialize">[docs]</a>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bgcolorstr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;bgcolor&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;zap;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;background &#39;&quot;</span><span class="o">+</span><span class="n">bgcolorstr</span><span class="o">+</span><span class="s">&quot;&#39;;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="c">#self.jmol.send(&quot;background &#39;&quot;+bgcolorstr+&quot;&#39;;\n&quot;)</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.refresh"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
            <span class="n">httk</span><span class="o">.</span><span class="n">external</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">structure_to_jmol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">stdin</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="p">,</span> <span class="n">copies</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">repeat</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;repetitions&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s">&#39;defaults&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;publish&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">defaults_publish</span><span class="p">()</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">defaults_publish</span><span class="p">()</span> 
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.save_and_quit"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.save_and_quit">[docs]</a>    <span class="k">def</span> <span class="nf">save_and_quit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span><span class="n">resx</span><span class="o">=</span><span class="mi">3200</span><span class="p">,</span><span class="n">resy</span><span class="o">=</span><span class="mi">2500</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&#39;write image &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">resx</span><span class="p">)</span><span class="o">+</span><span class="s">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">resy</span><span class="p">)</span><span class="o">+</span><span class="s">&#39; &quot;&#39;</span><span class="o">+</span><span class="n">filename</span><span class="o">+</span><span class="s">&#39;&quot;;exitJmol;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">wait_finish</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">=</span> <span class="bp">None</span>
                 </div>
<div class="viewcode-block" id="JmolStructureVisualizer.show"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">repeat</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">=</span> <span class="n">httk</span><span class="o">.</span><span class="n">external</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.stop"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.stop">[docs]</a>    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.wait"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.wait">[docs]</a>    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">wait_finish</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.rotate"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">angle</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;rotate x &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">angle</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&quot;; rotate z &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">angle</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&quot;; rotate y &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">angle</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">+</span><span class="s">&quot;;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="JmolStructureVisualizer.spin"><a class="viewcode-back" href="../../../../httk.atomistic.vis.html#httk.atomistic.vis.jmolstructurevisualizer.JmolStructureVisualizer.spin">[docs]</a>    <span class="k">def</span> <span class="nf">spin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">on</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;spin on;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">jmol</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;spin off;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    
    </div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3><a href="#">Navigation</a></h3>
  <ul>
<li><a class="reference internal" href="/index.html">The High-Throughput Toolkit (httk)</a>
</ul>
<ul>
<li><a class="reference internal" href="/downloads.html">Downloads</a>
<li><a class="reference internal" href="/install.html">Installation</a>
<li><a class="reference internal" href="/users_guide.html">Users' Guide</a>
<li><a class="reference internal" href="/runmanager_details.html">Runmanager Details</a>
<li><a class="reference internal" href="/developers_guide.html">Developers' Guide</a>
<li><a class="reference internal" href="/contributors.html">Contributors</a>
<li><a class="reference internal" href="/erratum.html">Erratum</a>
</ul>
<h3><a href="#">Python API</a></h3>
<ul>
<li><a class="reference internal" href="/mod_httk.html">httk</a>
<li><a class="reference internal" href="/mod_httk_atomistic.html">httk.atomistic</a>
</ul>
<ul>
<li><a class="reference internal" href="/httk_base.html">Full API tree</a>
<li><a class="reference internal" href="/genindex.html">Index</a>
<li><a class="reference internal" href="/py-modindex.html">Module Index</a>
<li><a class="reference internal" href="/search.html">Search Page</a>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">httk 1.0.1 documentation</a> &raquo;</li>
          <li><a href="../../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../../httk.html" >httk</a> &raquo;</li>
          <li><a href="../../atomistic.html" >httk.atomistic</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2015, Rickard Armiento et al..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6663881-6', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>